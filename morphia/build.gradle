apply plugin: 'findbugs'

archivesBaseName = 'morphia'

sourceSets {
    test.java.srcDirs += ['src/examples/java']
}

dependencies {
    compile "org.mongodb:mongo-java-driver:${driverVersion}"
    compile 'com.thoughtworks.proxytoys:proxytoys:1.0'
    compile 'cglib:cglib-nodep:2.2.2', optional
    testCompile "org.zeroturnaround:zt-exec:${ztExecVersion}"
    testCompile "com.jayway.awaitility:awaitility:${awaitilityVersion}"
    testCompile "org.skyscreamer:jsonassert:${jsonAssertVersion}"

    testCompile "log4j:log4j:1.2.17"
    testCompile "org.slf4j:slf4j-log4j12:${slf4jVersion}"
    testCompile "org.slf4j:jul-to-slf4j:${slf4jVersion}"
}

findbugs {
    excludeFilter = new File("$configDir/findbugs-exclude.xml")
    toolVersion = '3.0.0'
    sourceSets = [sourceSets.main]
}

tasks.withType(FindBugs) {
    reports {
        xml.enabled = project.buildingWith('xmlReports.enabled')
        html.enabled = !project.buildingWith('xmlReports.enabled')
    }
}


